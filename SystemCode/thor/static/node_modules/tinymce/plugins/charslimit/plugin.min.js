tinymce.PluginManager.add("charslimit",function(b){var c=function(){return b.getContent({format:"text"}).replace(/(\r\n\t|\n|\r\t)/gm,"").length},d=function(){b.theme.panel.find("#charslimit").text(100-c()+" characters left")};b.on("init",function(){var a=b.theme.panel&&b.theme.panel.find("#statusbar")[0];a&&a.insert({type:"label",name:"charslimit",classes:"wordcount",disabled:b.settings.readonly},0);d()});b.on("keydown",function(a){100<=c()&&8!=a.keyCode&&46!=a.keyCode&&(a.stopPropagation(),a.preventDefault())});
b.on("keyup",function(a){d()});b.on("paste",function(a){a.preventDefault();a=a.clipboardData.getData("text").substring(0,100-c());b.execCommand("mceInsertContent",!1,a)})});